<Window x:Class="WpfApp1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Hệ thống giám sát DC" Height="720" Width="1080"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Banner -->
        <Border Grid.Row="0" Background="#FF1CB1CE" Height="100">
            <DockPanel LastChildFill="True" Margin="16,0">
                <TextBlock Text="HỆ THỐNG GIÁM SÁT ĐIỀU KHIỂN ĐỘNG CƠ DC"
                   FontSize="26" FontWeight="Bold" VerticalAlignment="Center"/>
            </DockPanel>
        </Border>

        <!-- Nội dung -->
        <Grid Grid.Row="1" Margin="16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="13*"/>
                <!-- Biểu đồ lớn -->
                <ColumnDefinition Width="7*"/>
                <!-- Điều khiển -->
            </Grid.ColumnDefinitions>

            <!-- BIỂU ĐỒ + chỉ số -->
            <Border Grid.Column="0" BorderBrush="#333" BorderThickness="1" CornerRadius="10" Padding="12">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Chỉ số tức thời -->
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Pos:"/>
                        <TextBlock x:Name="TxtPos" FontWeight="Bold" Margin="6,0,0,0"/>
                        <TextBlock Text="Sp:" Margin="12,0,0,0"/>
                        <TextBlock x:Name="TxtVel" FontWeight="Bold" Margin="6,0,0,0"/>
                    
              
                    </StackPanel>

                    <!-- Chart -->
                    <Border Grid.Row="1" Margin="0,8,0,8" Background="#0E1320" CornerRadius="8"
                  BorderBrush="#2D3444" BorderThickness="1">
                        <Canvas x:Name="Plot" Margin="8" SizeChanged="Plot_SizeChanged"/>
                    </Border>

                    <StackPanel Grid.Row="2" Orientation="Horizontal" Opacity="0.8">
                        <TextBlock Text="• Pos"/>
                        <TextBlock Text="• SP" Margin="16,0,0,0"/>
              
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ĐIỀU KHIỂN -->
            <Border Grid.Column="1" BorderBrush="#333" BorderThickness="1" CornerRadius="10" Padding="12" Margin="12,0,0,0">
                <StackPanel>
                    <TextBlock Text="Kết nối Serial" FontWeight="Bold" FontSize="16" Margin="0,0,0,8"/>

                    <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                        <TextBlock Text="Cổng COM" Width="110" VerticalAlignment="Center"/>
                        <ComboBox x:Name="CmbPorts" Width="160"/>
                        <Button x:Name="BtnRefresh" Content="Refresh" Margin="8,0,0,0"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                        <TextBlock Text="Baudrate" Width="110" VerticalAlignment="Center"/>
                        <ComboBox x:Name="CmbBaud" Width="160" SelectionChanged="Baudrate"/>
                        <TextBlock x:Name="TxtBaudSel" Margin="8,0,0,0" VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                        <Button x:Name="BtnConnect" Content="Connect" Width="100"/>
                        <Button x:Name="BtnDisconnect" Content="Disconnect" Width="100" Margin="8,0,0,0"/>
                    </StackPanel>

                    <Separator Margin="0,12,0,12"/>

                    <!-- Setpoint -->
                    <TextBlock Text="Setpoint" FontWeight="Bold"/>
                    <StackPanel Orientation="Horizontal">
                        <TextBox x:Name="TxtSp" Width="120" Text="1200"/>
                        <Button x:Name="BtnSetSp" Content="Send SP" Margin="8,0,0,0"/>
                        <CheckBox x:Name="ChkHold" Content="Hold (ramp)" IsChecked="True" Margin="8,0,0,0"/>
                    </StackPanel>

                    <!-- PID -->
                    <TextBlock Text="PID Gains" FontWeight="Bold" Margin="0,12,0,0"/>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Kp"/>
                        <TextBox x:Name="TxtKp" Width="80" Text="2.0" Margin="4,0,0,0"/>
                        <TextBlock Text="Ki" Margin="8,0,0,0"/>
                        <TextBox x:Name="TxtKi" Width="80" Text="5.5" Margin="4,0,0,0"/>
                        <TextBlock Text="Kd" Margin="8,0,0,0"/>
                        <TextBox x:Name="TxtKd" Width="80" Text="0.02" Margin="4,0,0,0"/>
                        <Button x:Name="BtnSetPid" Content="Apply PID" Margin="8,0,0,0"/>
                    </StackPanel>

                    <!-- Enable/Disable/Reset -->
                    <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                        <Button x:Name="BtnEnable" Content="Enable" Width="90"/>
                        <Button x:Name="BtnDisable" Content="Disable" Width="90" Margin="8,0,0,0"/>
                        <Button x:Name="BtnRstEnc" Content="Reset ENC" Width="110" Margin="8,0,0,0"/>
                    </StackPanel>

                    <!-- Test input -->
                    <TextBlock Text="Test Input" FontWeight="Bold" Margin="0,12,0,0"/>
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="BtnStep" Content="Step +ΔSP"/>
                        <TextBox x:Name="TxtStep" Width="80" Text="200" Margin="8,0,0,0"/>
                        <Button x:Name="BtnSine" Content="Sine On/Off" Margin="8,0,0,0"/>
                        <TextBox x:Name="TxtAmp" Width="80" Text="100" Margin="8,0,0,0"/>
                        <TextBox x:Name="TxtFreq" Width="80" Text="0.5" Margin="8,0,0,0"/>
                    </StackPanel>

                    <TextBlock Text="Log" FontWeight="Bold" Margin="0,12,0,6"/>
                    <ListBox x:Name="LstLog" Height="220"/>
                </StackPanel>
            </Border>
            <Image Grid.Column="1" HorizontalAlignment="Left" Height="57" Margin="145,-91,0,0" VerticalAlignment="Top" Width="191" Source="/positive-full-color-04-600x183.png"/>
        </Grid>
    </Grid>
</Window>
